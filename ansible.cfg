# SSH Configuration
#
# SSH agent forwarding is handled via inventory configuration:
#   - IdentityAgent uses forwarded SSH_AUTH_SOCK from DevContainer
#   - IdentitiesOnly prevents trying all keys (important for 1Password with many keys)
#   - StrictHostKeyChecking ensures known_hosts verification
#   - UserKnownHostsFile uses workspace-local .ssh/known_hosts
#
# See: docs/SSH_SETUP.md for complete configuration guide

[defaults]
inventory               = inventory/hosts.yml
roles_path              = ~/.ansible/roles:./roles
collections_paths       = .venv/lib/python3.12/site-packages
retry_files_enabled     = false
interpreter_python      = auto_silent
# host_key_checking enabled (default=True) for security
# If you need to disable for initial setup, run: ANSIBLE_HOST_KEY_CHECKING=False ansible-playbook ...
# host_key_checking       = False
forks                   = 10
stdout_callback         = ansible.builtin.default
bin_ansible_callbacks   = True
deprecation_warnings    = False
timeout                 = 60
any_errors_fatal        = True
force_color             = True
nocows                  = 1
# Suppress profile_tasks deprecation warning - callbacks are being updated upstream
callbacks_whitelist     = timer
# Suppress DEFAULT_MANAGED_STR deprecation (will be removed in Ansible 2.23)
# Use ansible_managed variable directly in templates instead
ansible_managed         = Ansible managed

[colors]
highlight = white
verbose   = blue
warn      = yellow
error     = red
debug     = cyan
deprecate = magenta
skip      = black
unreachable = red
ok        = green
changed   = yellow

[privilege_escalation]
become = True
become_method = sudo
become_ask_pass = False

[ssh_connection]
pipelining = True
ssh_args = -o ForwardAgent=yes -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=.ssh/known_hosts -o StrictHostKeyChecking=yes
