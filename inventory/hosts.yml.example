---
all:
  children:
    homelab:
      hosts:
        debian-docker:
          ansible_host: 10.0.0.100  # Replace with your VM's IP address
          ansible_user: admin  # Replace with your SSH user
          ansible_python_interpreter: /usr/bin/python3
          # SSH agent forwarding configuration (uses 1Password SSH agent)
          # Configuration explained:
          #   IdentityAgent: Use forwarded 1Password SSH agent
          #   IdentitiesOnly: Only try keys from agent (prevents exhaustion with many keys)
          #   StrictHostKeyChecking: Verify host keys for MITM protection
          #   UserKnownHostsFile: Workspace-local known hosts file
          ansible_ssh_common_args: >-
            -o IdentityAgent={{ lookup('env', 'SSH_AUTH_SOCK') }}
            -o IdentityFile={{ playbook_dir }}/../.ssh/proxmox_ed25519.pub
            -o IdentitiesOnly=yes
            -o StrictHostKeyChecking=yes
            -o UserKnownHostsFile={{ playbook_dir }}/../.ssh/known_hosts
